# Coltre
Данный телеграм бот призван объединить людей, которые хотят заниматься спортом в домашних условиях, но не могут найти мотивацию. Мы осознаём, что мотивация приходит, когда появляются единомышленники.

За участие платить не нужно, вы сможете начать заниматься в любой момент и в любое время.

Программа будет состоять из нескольких упражнений, которые будут меняться каждый день, но также и не забудем про отдых. Под него тоже будет выделено несколько дней.
Программа будет выбрана пользователями, либо администраторами заранее. Пример программы: в первый день 150 отжиманий, во второй 200 приседаний, в третий 10 минут планки, в четвертый 50 подтягиваний.
Программу пользователи могут выполнять в любое время в течение дня, однако если выполнение просрочить, то последует штраф. Сумма штрафа также будет оговорена позже. При неуплате штрафа в течение недели пользователь попадает в чёрный список, теряя возможность использовать данного бота. Во время данного на оплату времени у штрафника есть возможность подать апелляцию, которая будет рассмотрена пользователями в общем чате.
Штрафы идут в общий банк, который будет разыгран по окончанию программы в выбранную заранее дату.

Процесс выбора победителей до конца не утверждён, однако, вероятнее всего, он будет зависеть от количества пропущенных дней, регулярности пропуска, общее количество выполненных повторений или минут (возможно, стоит добавить систему перевыполнения со своими бонусами), а также количества проверенных пользователей.

К слову о проверке. Планируется полностью автономная система, где результат выполненной работы пользователя будет проверен на корректность другими участниками. Например. Сегодня нужно выполнить 150 отжиманий. Пользователь А выполнил 50 отжиманий и отправил боту на проверку. Бот определил эта данные на проверку пользователю Б. Пользователь Б посмотрел процесс выполнения упражнений пользователя А и подтвердил их корректность. Пользователь А выполнил оставшиеся ему 100 отжиманий в течение дня, случайно одно пропустив. Это заметили другие пользователи и уведомили его об этом.
Выше была описана ситуация, при которой некий пользователь А неверно выполнил план, из-за чего ему было выдано предупреждение. Несколько таких предупреждений в неделю приравниваются к пропущенному дню и караются штрафом. Это сделано для того, чтобы уменьшить вероятность обмана, а также нагрузку на пользователей.
Безусловно, у каждого есть возможность пропускать дни по уважительной причине, объяснив ситуацию и предоставив доказательства боту, который в оформленном виде спросит разрешения пропустить текущий этап у других пользователей в общем чате.

## Команды бота
* `/start` – приветственное сообщение  
* `/current_program` – текущая программа тренировки  
* `/current_exercise` – упражнение, которое выполняется на данный момент 
* `/member_menu` – меню взаимодействия с ботом для участников   
* `/help`– справка

## Функции подробнее:
1. **Проверка**. Бот должен уметь проверять, находится ли общающийся с ним пользователь в списке участников, путём проверки на его присутствие в закрытом чате. Если состоит, то открывается доступ к следующим функциям, если нет, то бот рассказывает о том, что он связан с закрытым сообществом, и отправляет ссылку на сайт сообщества.
2. **Панель** **взаимодействия** **с** **пользователем**. У пользователя должно быть меню взаимодействия, где он может посмотреть интересующую его информацию. Например, информацию по сегодняшней программе: Какое упражнение выполняется, Сколько подходов (минут) пользователь уже сделал, сколько необходимо сделать в общем, Связь с администратором (подробнее будет описано ниже). Пока что всё.
3. **Смена** **дней**. Бот должен менять дни в плане программы. При этом учитывать выполняемое предложение и всегда знать, в чём исчисляется сегодняшний результат (минуты, подходы). *Определить точку отсчёта, с помощью которой можно будет узнать текущее состояние, текущее упражнение, текущий этап.*
4. **Панель** **администратора**. За администратором остаётся возможность выполнять план тренировки, но сам он себя проверять, конечно же, не может. Есть два пути решения, либо одного из администраторов будет проверять другой, если таковой имеется, либо администратор будет не учитываться в конечном результате, в таблице лидеров, но штрафы никуда не уходят.
5. **Общение** **с** **администратором**. У пользователя есть возможность в любой момент написать администратору через бота, такое сообщение у администратора будет помечено как пользовательское.
	1. Работа с пользователем. Перейдя в меню, отвечающее за общение с администратором бот кратко объяснит, что хочет от пользователя, и перейдёт в режим ожидания сообщения. После получения сообщения бот отправит его администратору с краткой информацией по сообщению: Имя (никнейм) пользователя и может быть что-то ещё.
	2. Работа с администратором. После получения сообщения от пользователя у администратора будет возможность ответить. Чтобы пользователю пришёл ответ достаточно ответить (свайпнуть вправо) на сообщение с текстом обращения пользователя. Чтобы администратор смог получить доступ к сообщениям он должен перейти в соответствующее меню.
6. **Контроль**. Главная функция бота – это контролировать участников. Пользователь в назначенный период должен отправить видеосообщение с результатом, а задача бота ~~переслать его администратору~~ распределить сообщения между другими участниками (принцип разделения обсудим позже). С видеосообщением бот должен присылать краткую информацию по пользователю, такую как Имя (никнейм), Заявленный результат (тот, что был выполнен за данный подход), Общий результат за день, и, возможно, текущий долг. 
   Думаю, следует разбить этот пункт:
	   1. Работа с пользователем. Бот обязан ждать видеосообщения от пользователя и отправить его/их лишь после внесения пользователем текущего результата, выполненного на данных видеосообщениях. Если результат не высылается, то за пользователем закрепляется пропущенный день. Пропущенные дни будут описаны в другой функции.
	   2. ~~Работа с администратором. После успешной передачи результатов пользователем, они попадают к администратору, который проверяет их на корректность. Если результаты корректны, то пользователю зачисляется данный результат, если нет, то выносится замечание о некорректности данных. Три замечания за месяц равняются одному пропущенному дню. На данном этапе у администратора появляется возможность написать пользователю через бота. Данное сообщение будет помечено как сообщение администратора.~~
	   3. Проверка результатов. После успешной передачи результатов пользователем они распределяются между другими участниками. Если результаты корректны, то пользователю зачисляется данный результат, если нет, то формируется заявка на замечание о некорректности данных. Данные заявки обрабатывает администратор. Три замечания за месяц равняются одному пропущенному дню. На данном этапе у проверяющего появляется возможность написать через бота администратору.
7. **Обработка** **пропущенных** **дней**. Если пользователь пропустил день, то он обязан выполнить денежный перевод на указанный счёт. На выполнение перевода даётся неделя, в течение которой пользователь имеет право обжаловать данное решение. В меню бота появляется новый пункт: «Штрафной день» (Название не окончательное).
8. **Обжалование**. Обжалование будет происходить через бота без участия администратора. Пользователю необходимо будет описать свою ситуацию, чтобы бот смог создать опрос в общем чате. Окончательное решение принимается по истечению 6 дней (за сутки до данной на перевод недели) по результатам опроса. Если хотя бы 30% пользователей посчитают доводы участника недостаточными для пропуска дня, то дело объявляется закрытым. У участника должно остаться время на совершение перевода.
9. **Реабилитация**. Если по результатам опроса люди посчитали пропуск дня обоснованным, то происходит реабилитация. Пользователю не придётся совершать перевод. Если по результатам опроса люди посчитали пропуск необоснованным, то обязанность совершить перевод никуда не уходит.
10. **Совершение** **перевода**. Данный пункт будет разделён на два подпункта:
	1. Работа с пользователем. В меню, связанном со штрафными дням будет ссылка на счёт, номер телефона, qr-код или любые другие способы совершения перевода на общий счёт.
	2. Работа с администратором. После подтверждения перевода администратору приходит уведомление о необходимости проверить совершённый перевод и вынести окончательное решение: аннулировать штраф или нет. Если штраф не аннулируется, то пользователь исключается ботом из общего чата автоматически.